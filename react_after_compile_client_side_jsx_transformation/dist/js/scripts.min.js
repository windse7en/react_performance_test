!function(){"use strict";function t(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function e(){var t=location.href.indexOf("examples/");return location.href.substr(0,t)}function r(t,r){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var n=new XMLHttpRequest;n.open("GET",e()+t,!0),n.send(),n.onload=function(){200===n.status&&r&&r(n.responseText)}}function n(t,e){if(!(this instanceof n))return new n(t,e);var r,o;if("object"!=typeof t)try{t=JSON.parse(t)}catch(i){return}e&&(r=e.template,o=e.framework),!r&&t.templates&&(r=t.templates.todomvc),!o&&document.querySelector("[data-framework]")&&(o=document.querySelector("[data-framework]").dataset.framework),this.template=r,t.backend?(this.frameworkJSON=t.backend,this.frameworkJSON.issueLabel=o,this.append({backend:!0})):t[o]&&(this.frameworkJSON=t[o],this.frameworkJSON.issueLabel=o,this.append()),this.fetchIssueCount()}var o=function(t){t.defaults=function(t){if(!t)return t;for(var e=1,r=arguments.length;r>e;e++){var n=arguments[e];if(n)for(var o in n)null==t[o]&&(t[o]=n[o])}return t},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var e=/(.)^/,r={"'":"'","\\":"\\","\r":"r","\n":"n","  ":"t","\u2028":"u2028","\u2029":"u2029"},n=/\\|'|\r|\n|\t|\u2028|\u2029/g;return t.template=function(o,i,s){var a;s=t.defaults({},s,t.templateSettings);var c=new RegExp([(s.escape||e).source,(s.interpolate||e).source,(s.evaluate||e).source].join("|")+"|$","g"),h=0,u="__p+='";o.replace(c,function(t,e,i,s,a){return u+=o.slice(h,a).replace(n,function(t){return"\\"+r[t]}),e&&(u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),i&&(u+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(u+="';\n"+s+"\n__p+='"),h=a+t.length,t}),u+="';\n",s.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{a=new Function(s.variable||"obj","_",u)}catch(f){throw f.source=u,f}if(i)return a(i,t);var p=function(e){return a.call(this,e,t)};return p.source="function("+(s.variable||"obj")+"){\n"+u+"}",p},t}({});"todomvc.com"===location.hostname&&(!function(t,e,r,n,o,i,s){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,i=e.createElement(r),s=e.getElementsByTagName(r)[0],i.async=1,i.src=n,s.parentNode.insertBefore(i,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-31081062-1","auto"),ga("send","pageview")),n.prototype.append=function(t){var r=document.createElement("aside");if(r.innerHTML=o.template(this.template,this.frameworkJSON),r.className="learn",t&&t.backend){var n=r.querySelector(".source-links"),i=n.firstElementChild,s=n.lastElementChild,a=s.getAttribute("href");s.setAttribute("href",a.substr(a.lastIndexOf("http"))),n.innerHTML=i.outerHTML+s.outerHTML}else{var c=r.querySelectorAll(".demo-link");Array.prototype.forEach.call(c,function(t){"http"!==t.getAttribute("href").substr(0,4)&&t.setAttribute("href",e()+t.getAttribute("href"))})}document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",r.outerHTML)},n.prototype.fetchIssueCount=function(){var t=document.getElementById("issue-count-link");if(t){var e=t.href.replace("https://github.com","https://api.github.com/repos"),r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(e){var r=JSON.parse(e.target.responseText);if(r instanceof Array){var n=r.length;0!==n&&(t.innerHTML="This app has "+n+" open issues",document.getElementById("issue-count").style.display="inline")}},r.send()}},t(),r("learn.json",n)}(),function(){"use strict";function t(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)r.push(o);else if(Array.isArray(o))r.push(t.apply(null,o));else if("object"===i)for(var s in o)e.call(o,s)&&o[s]&&r.push(s)}}return r.join(" ")}var e={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return t}):window.classNames=t}(),function(t){function e(){return""===h.hash||"#"===h.hash}function r(t,e){for(var r=0;r<t.length;r+=1)if(e(t[r],r,t)===!1)return}function n(t){for(var e=[],r=0,n=t.length;n>r;r++)e=e.concat(t[r]);return e}function o(t,e,r){if(!t.length)return r();var n=0;!function o(){e(t[n],function(e){e||e===!1?(r(e),r=function(){}):(n+=1,n===t.length?r():o())})}()}function i(t,e,r){r=t;for(var n in e)if(e.hasOwnProperty(n)&&(r=e[n](t),r!==t))break;return r===t?"([._a-zA-Z0-9-%()]+)":r}function a(t,e){for(var r,n=0,o="";r=t.substr(n).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)n=r.index+r[0].length,r[0]=r[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),o+=t.substr(0,r.index)+r[0];t=o+=t.substr(n);var s,a,c=t.match(/:([^\/]+)/gi);if(c){a=c.length;for(var h=0;a>h;h++)s=c[h],t="::"===s.slice(0,2)?s.slice(1):t.replace(s,i(s,e))}return t}function c(t,e,r,n){var o,i=0,s=0,a=0,r=(r||"(").toString(),n=(n||")").toString();for(o=0;o<t.length;o++){var c=t[o];if(c.indexOf(r,i)>c.indexOf(n,i)||~c.indexOf(r,i)&&!~c.indexOf(n,i)||!~c.indexOf(r,i)&&~c.indexOf(n,i)){if(s=c.indexOf(r,i),a=c.indexOf(n,i),~s&&!~a||!~s&&~a){var h=t.slice(0,(o||1)+1).join(e);t=[h].concat(t.slice((o||1)+1))}i=(a>s?a:s)+1,o=0}else i=0}return t}var h=document.location,u={mode:"modern",hash:h.hash,history:!1,check:function(){var t=h.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function r(t){for(var e=0,r=f.listeners.length;r>e;e++)f.listeners[e](t)}var n=this;if(this.history=e,f.listeners||(f.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=r},500):window.onhashchange=r,this.mode="modern";else{var o=document.createElement("iframe");o.id="state-frame",o.style.display="none",document.body.appendChild(o),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&n.check()}),window.setInterval(function(){n.check()},50),this.onHashChanged=r,this.mode="legacy"}return f.listeners.push(t),this.mode},destroy:function(t){if(f&&f.listeners)for(var e=f.listeners,r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):h.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),r=e.contentDocument||e.contentWindow.document;r.open(),r.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),r.close()},syncHash:function(){var t=this._hash;return t!=h.hash&&(h.hash=t),this},onHashChanged:function(){}},f=t.Router=function(t){return this instanceof f?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),void this.mount(t||{})):new f(t)};f.prototype.init=function(t){var r,n=this;return this.handler=function(t){var e=t&&t.newURL||window.location.hash,r=n.history===!0?n.getPath():e.replace(/.*#/,"");n.dispatch("on","/"===r.charAt(0)?r:"/"+r)},u.init(this.handler,this.history),this.history===!1?e()&&t?h.hash=t:e()||n.dispatch("on","/"+h.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(r=e()&&t?t:e()?null:h.hash.replace(/^#/,""),r&&window.history.replaceState({},document.title,r)):r=this.getPath(),(r||this.run_in_init===!0)&&this.handler()),this},f.prototype.explode=function(){var t=this.history===!0?this.getPath():h.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},f.prototype.setRoute=function(t,e,r){var n=this.explode();return"number"==typeof t&&"string"==typeof e?n[t]=e:"string"==typeof r?n.splice(t,e,s):n=[t],u.setHash(n.join("/")),n},f.prototype.insertEx=function(t,e,r,n){return"once"===t&&(t="on",r=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(r)),this._insert(t,e,r,n)},f.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var r=this.explode();e=r.indexOf(t)}else e=this.explode();return e},f.prototype.destroy=function(){return u.destroy(this.handler),this},f.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var p=/\?.*/;f.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},f.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var r=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(r,e.source||e)},this},f.prototype.on=f.prototype.route=function(t,e,r){var n=this;return r||"function"!=typeof e||(r=e,e=t,t="on"),Array.isArray(e)?e.forEach(function(e){n.on(t,e,r)}):(e.source&&(e=e.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){n.on(t.toLowerCase(),e,r)}):(e=e.split(new RegExp(this.delimiter)),e=c(e,this.delimiter),void this.insert(t,this.scope.concat(e),r)))},f.prototype.path=function(t,e){var r=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=c(t,this.delimiter),this.scope=this.scope.concat(t),e.call(this,this),this.scope.splice(r,t.length)},f.prototype.dispatch=function(t,e,r){function n(){i.last=s.after,i.invoke(i.runlist(s),i,r)}var o,i=this,s=this.traverse(t,e.replace(p,""),this.routes,""),a=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),o=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],o&&o.length>0&&a?(this.async?this.invoke(o,this,n):(this.invoke(o,this),n()),!0):(n(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},r),!1)},f.prototype.invoke=function(t,e,n){var i,s=this;this.async?(i=function(r,n){return Array.isArray(r)?o(r,i,n):void("function"==typeof r&&r.apply(e,(t.captures||[]).concat(n)))},o(t,i,function(){n&&n.apply(e,arguments)})):(i=function(n){return Array.isArray(n)?r(n,i):"function"==typeof n?n.apply(e,t.captures||[]):void("string"==typeof n&&s.resource&&s.resource[n].apply(e,t.captures||[]))},r(t,i))},f.prototype.traverse=function(t,e,r,n,o){function i(t){function e(t){for(var r=[],n=0;n<t.length;n++)r[n]=Array.isArray(t[n])?e(t[n]):t[n];return r}function r(t){for(var e=t.length-1;e>=0;e--)Array.isArray(t[e])?(r(t[e]),0===t[e].length&&t.splice(e,1)):o(t[e])||t.splice(e,1)}if(!o)return t;var n=e(t);return n.matched=t.matched,n.captures=t.captures,n.after=t.after.filter(o),r(n),n}var s,a,c,h,u=[];if(e===this.delimiter&&r[t])return h=[[r.before,r[t]].filter(Boolean)],h.after=[r.after].filter(Boolean),h.matched=!0,h.captures=[],i(h);for(var f in r)if(r.hasOwnProperty(f)&&(!this._methods[f]||this._methods[f]&&"object"==typeof r[f]&&!Array.isArray(r[f]))){if(s=a=n+this.delimiter+f,this.strict||(a+="["+this.delimiter+"]?"),c=e.match(new RegExp("^"+a)),!c)continue;if(c[0]&&c[0]==e&&r[f][t])return h=[[r[f].before,r[f][t]].filter(Boolean)],h.after=[r[f].after].filter(Boolean),h.matched=!0,h.captures=c.slice(1),this.recurse&&r===this.routes&&(h.push([r.before,r.on].filter(Boolean)),h.after=h.after.concat([r.after].filter(Boolean))),i(h);if(h=this.traverse(t,e,r[f],s),h.matched)return h.length>0&&(u=u.concat(h)),this.recurse&&(u.push([r[f].before,r[f].on].filter(Boolean)),h.after=h.after.concat([r[f].after].filter(Boolean)),r===this.routes&&(u.push([r.before,r.on].filter(Boolean)),h.after=h.after.concat([r.after].filter(Boolean)))),u.matched=!0,u.captures=h.captures,u.after=h.after,i(u)}return!1},f.prototype.insert=function(t,e,r,n){var o,i,s,c,h;if(e=e.filter(function(t){return t&&t.length>0}),n=n||this.routes,h=e.shift(),/\:|\*/.test(h)&&!/\\d|\\w/.test(h)&&(h=a(h,this.params)),e.length>0)return n[h]=n[h]||{},this.insert(t,e,r,n[h]);if(h||e.length||n!==this.routes){if(i=typeof n[h],s=Array.isArray(n[h]),n[h]&&!s&&"object"==i)switch(o=typeof n[h][t]){case"function":return void(n[h][t]=[n[h][t],r]);case"object":return void n[h][t].push(r);case"undefined":return void(n[h][t]=r)}else if("undefined"==i)return c={},c[t]=r,void(n[h]=c);throw new Error("Invalid route context: "+i)}switch(o=typeof n[t]){case"function":return void(n[t]=[n[t],r]);case"object":return void n[t].push(r);case"undefined":return void(n[t]=r)}},f.prototype.extend=function(t){function e(t){n._methods[t]=!0,n[t]=function(){var e=1===arguments.length?[t,""]:[t];n.on.apply(n,e.concat(Array.prototype.slice.call(arguments)))}}var r,n=this,o=t.length;for(r=0;o>r;r++)e(t[r])},f.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(n(t)):n(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},f.prototype.mount=function(t,e){function r(e,r){var o=e,i=e.split(n.delimiter),s=typeof t[e],a=""===i[0]||!n._methods[i[0]],h=a?"on":o;return a&&(o=o.slice((o.match(new RegExp("^"+n.delimiter))||[""])[0].length),i.shift()),a&&"object"===s&&!Array.isArray(t[e])?(r=r.concat(i),void n.mount(t[e],r)):(a&&(r=r.concat(o.split(n.delimiter)),r=c(r,n.delimiter)),void n.insert(h,r,t[e]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var n=this;e=e||[],Array.isArray(e)||(e=e.split(n.delimiter));for(var o in t)t.hasOwnProperty(o)&&r(o,e.slice(0))}}}("object"==typeof exports?exports:window);var app=app||{};!function(){"use strict";app.Utils={uuid:function(){var t,e,r="";for(t=0;32>t;t++)e=16*Math.random()|0,(8===t||12===t||16===t||20===t)&&(r+="-"),r+=(12===t?4:16===t?3&e|8:e).toString(16);return r},pluralize:function(t,e){return 1===t?e:e+"s"},store:function(t,e){if(e)return localStorage.setItem(t,JSON.stringify(e));var r=localStorage.getItem(t);return r&&JSON.parse(r)||[]},extend:function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t}}}();var app=app||{};!function(){"use strict";var t=app.Utils;app.TodoModel=function(e){this.key=e,this.todos=t.store(e),this.onChanges=[]},app.TodoModel.prototype.subscribe=function(t){this.onChanges.push(t)},app.TodoModel.prototype.inform=function(){t.store(this.key,this.todos),this.onChanges.forEach(function(t){t()})},app.TodoModel.prototype.addTodo=function(e){this.todos=this.todos.concat({id:t.uuid(),title:e,completed:!1}),this.inform()},app.TodoModel.prototype.toggleAll=function(e){this.todos=this.todos.map(function(r){return t.extend({},r,{completed:e})}),this.inform()},app.TodoModel.prototype.toggle=function(e){this.todos=this.todos.map(function(r){return r!==e?r:t.extend({},r,{completed:!r.completed})}),this.inform()},app.TodoModel.prototype.destroy=function(t){this.todos=this.todos.filter(function(e){return e!==t}),this.inform()},app.TodoModel.prototype.save=function(e,r){this.todos=this.todos.map(function(n){return n!==e?n:t.extend({},n,{title:r})}),this.inform()},app.TodoModel.prototype.clearCompleted=function(){this.todos=this.todos.filter(function(t){return!t.completed}),this.inform()}}();
